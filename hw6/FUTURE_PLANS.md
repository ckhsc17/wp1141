# Booboo Bot 未來規劃

## 向量比對實作規劃

### 為什麼需要向量比對？

目前使用關鍵字搜尋（tags + text search）有以下限制：
- 無法理解語義相似性（例如：「時間管理」和「效率提升」是相關的，但關鍵字搜尋無法匹配）
- 無法處理同義詞（例如：「作業」和「功課」）
- 無法理解上下文關係

向量比對可以：
- 理解語義相似性
- 支援更精準的 RAG 查詢
- 提供更好的推薦和回饋

### 技術選型

#### 選項 1：pgvector (PostgreSQL Extension)

**優點**：
- 與現有 PostgreSQL 資料庫整合
- 開源且成熟
- 支援多種向量距離計算（cosine, L2, inner product）
- 可以與 Prisma 整合（需要自訂 SQL）

**缺點**：
- 需要 PostgreSQL 擴充支援
- Prisma 原生不支援，需要自訂查詢
- 向量維度需要手動管理

**實作步驟**：
1. 在 PostgreSQL 中啟用 `pgvector` 擴充
2. 在 `SavedItem` 表格新增 `embedding` 欄位（`vector(1536)` 用於 OpenAI，或 `vector(768)` 用於其他模型）
3. 使用 Gemini Embedding API 或 OpenAI Embedding API 生成向量
4. 在儲存內容時同時生成並儲存向量
5. 在 RAG 查詢時，使用向量相似度搜尋
6. 結合關鍵字搜尋和向量搜尋（hybrid search）

#### 選項 2：Supabase Vector

**優點**：
- Supabase 原生支援向量搜尋
- 與 Supabase 生態系統整合良好
- 提供簡單的 API

**缺點**：
- 需要遷移到 Supabase
- 依賴 Supabase 服務

**實作步驟**：
1. 遷移資料庫到 Supabase
2. 使用 Supabase Vector 功能
3. 整合到現有查詢邏輯

### 推薦方案

建議使用 **pgvector**，因為：
- 可以繼續使用現有的 PostgreSQL 資料庫
- 不需要遷移資料
- 更靈活的控制

### 實作時間表

1. **Phase 1**: 設定 pgvector 擴充
2. **Phase 2**: 實作向量生成（在儲存內容時）
3. **Phase 3**: 實作向量搜尋（在 RAG 查詢時）
4. **Phase 4**: 實作 Hybrid Search（結合關鍵字和向量）
5. **Phase 5**: 優化與測試

## 更進階的 Tag 自動分類

### 現況

目前 tags 是由 LLM 在分析內容時自動生成，但可以進一步優化：

### 改進方向

1. **Tag 標準化**
   - 建立 tag 詞彙表（taxonomy）
   - 自動將相似 tags 合併（例如：「time-management」和「時間管理」）
   - 提供 tag 建議功能

2. **Tag 層級化**
   - 建立 tag 層級結構（例如：`technology > frontend > react`）
   - 支援 tag 繼承和搜尋

3. **Tag 自動學習**
   - 根據用戶使用習慣自動調整 tag 分類
   - 學習用戶偏好的 tag 命名方式

4. **Tag 統計與分析**
   - 提供 tag 使用統計
   - 分析 tag 之間的關聯性
   - 提供 tag 推薦

## 個人化推薦演算法

### 現況

目前使用簡單的 RAG 查詢（基於 tags），可以進一步優化：

### 改進方向

1. **協同過濾**
   - 分析用戶的內容偏好
   - 推薦相似用戶喜歡的內容

2. **內容相似度**
   - 使用向量比對找出相似內容
   - 推薦與用戶過去喜歡內容相似的項目

3. **時間序列分析**
   - 分析用戶的內容消費模式
   - 在合適的時間推薦相關內容

4. **多目標優化**
   - 平衡多樣性和相關性
   - 避免推薦過於相似的內容

## 其他功能規劃

### 1. 內容摘要與整理

- 自動為用戶的內容生成摘要
- 定期整理和歸檔舊內容
- 提供內容統計報告

### 2. 提醒與通知

- 智能提醒（基於用戶習慣）
- 內容回顧提醒
- 待辦事項智能提醒

### 3. 多媒體支援

- 圖片分析與標記
- 語音訊息轉文字
- 影片連結分析

### 4. 協作功能

- 分享內容給其他用戶
- 協作待辦事項
- 群組推薦

### 5. 數據分析與視覺化

- 個人內容統計
- 時間分佈分析
- Tag 使用趨勢
- 內容類型分佈

## 技術債務

1. **錯誤處理**
   - 統一錯誤處理機制
   - 更詳細的錯誤訊息

2. **測試**
   - 單元測試
   - 整合測試
   - E2E 測試

3. **效能優化**
   - 快取機制
   - 資料庫查詢優化
   - LLM 調用優化

4. **監控與告警**
   - 系統監控
   - 錯誤告警
   - 效能監控

